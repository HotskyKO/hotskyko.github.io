$(document).ready(function(){function r(e,t){if(t){var n='<div class="whitebox alert-popup">'+"<h5>"+e+"</h5>"+'<a class="btn3" onclick="location.reload()"><h6>Lukk</h6></a>'+"</div>"}else{var n='<div class="whitebox alert-popup">'+"<h5>"+e+"</h5>"+'<a class="btn3 js-closePopup"><h6>Lukk</h6></a>'+"</div>"}$.magnificPopup.open({items:{src:n,type:"inline"}})}function s(e){var t=$(".js-employeeSearch").val();if(t.length<=2){e.find(".employee-image").show()}else{e.find(".employee-image").hide()}}var e=navigator.userAgent;clickevent=e.match(/iPad/i)?"touchstart":"click";var t=$("input#baseurl").val();$("#top_search").on("blur",function(){$(this).val("")});$(".nav-toggle").hover(function(){$("header").addClass("hover")},function(){$("header").removeClass("hover")});$(".nav-toggle").on(clickevent,function(e){e.preventDefault()});$("a.js-catalogFooterForm").on(clickevent,".form-wrap",function(e){e.stopPropagation();e.preventDefault()});$("#top_search_results").on(clickevent,".js-searchCatalog",function(e){e.stopPropagation();e.preventDefault();$.magnificPopup.open({items:{src:".catalog-popup-module",type:"inline"},closeBtnInside:true})});$(".js-headerCatOrder").on(clickevent,function(e){e.preventDefault();e.stopPropagation();$("header").removeClass("expanded");$.magnificPopup.open({items:{src:".catalog-popup-module",type:"inline"},closeBtnInside:true})});$(".magfs").on("click",function(e){var t=$(this).attr("data-source");if(!t)return;$.magnificPopup.open({items:{src:t},type:"image"})});$("#top_search").bind("keypress",function(e){if(e.which===13)return false});$("#top_search").keyup(function(e){$("header").removeClass("expanded");var t=$(this),n=$(this).closest("form"),r=$("#top_search_results"),i=t.val().toLowerCase();if(i.length>2){n.ajaxSubmit({success:function(e){r.show();if(e.status=="nohit"){r.find(".hits").empty().hide();r.find(".no-hits").show()}if(e.status=="hit"){r.find(".hits").empty();for(var t in e.results){r.find(".hits").append('<p class="header">'+t+"</p>");if(t=="katalog"){r.find(".hits").append('<a href="#" class="js-searchCatalog"><p>Bestill katalog</p></a>')}else{for(var n in e.results[t]){var i='<a href="'+e.results[t][n].link+'"><p>'+e.results[t][n].title+"</p></a>";r.find(".hits").append(i)}}}r.find(".no-hits").hide();r.find(".hits").show()}},error:function(e){},dataType:"json"})}else{r.hide()}});if($("input#katalogfilter").val()=="yes"){imagesLoaded(document.querySelector("#page-wrap"),function(e){var t=$(".bolig-list ul");t.css("width","840px");t.isotope({itemSelector:"li.item",layoutMode:"cellsByRow",cellsByRow:{rowHeight:296},masonry:{columnWidth:256,gutterWidth:36}});setTimeout(function(){t.addClass("animation")},1e3);var n={};$(".filter input").change(function(){function i(e){var t=e[0];var r=e.parents("ul").attr("data-type");var i=n[r];if(!i){i=n[r]=[]}var s=$.inArray(e.attr("data-filter"),i),o=false;if(e.prop("checked")){var u=o?"input":"input.all";e.siblings(u).removeAttr("checked");if(!o&&s===-1){n[r].push(e.attr("data-filter"))}}else if(!o){n[r].splice(s,1);if(!e.siblings("[checked]").length){e.siblings("input.all").attr("checked","checked")}}}function s(e){var t=0;var n=[];var r=[];for(var i in e){r.push(e[i].join(" "));var s=e[i];if(!s.length){continue}if(t===0){n=s.slice(0)}else{var o=[];var u=n.slice(0);for(var a=0,f=s.length;a<f;a++){for(var l=0,c=u.length;l<c;l++){o.push(u[l]+s[a])}}n=o}t++}var h=n.join(", ");return h}$(".js-clearCatFilters").show();var e=$(".filter .float-wrap ul"),r=[];i($(this));filter=s(n);t.isotope({filter:filter})})})}$(".js-toggleCatFilters").on(clickevent,function(e){e.preventDefault();var t=$(".float-wrap-wrap");if(t.hasClass("active")){t.removeClass("active").slideUp(200)}else{t.addClass("active").slideDown(200)}});$(".js-clearCatFilters").on(clickevent,function(e){e.preventDefault();$(".filter input").each(function(){$(this).prop("checked",false)});$(".filter input").trigger("change");$(".float-wrap-wrap").removeClass("active").slideUp(200)});$(".bolig-list a").on(clickevent,function(e){e.preventDefault();savedFilter=[];href=$(this).attr("href");$(".bolig-list li").each(function(){if($(this).css("opacity")!=0){savedFilter.push($(this).attr("data-id"))}});$("input#filter").val(savedFilter.join(","));$("form#savefilters").ajaxSubmit({success:function(e){window.location=href},error:function(e){},dataType:"json"})});$(".prosjekt-list li a").on(clickevent,function(e){e.preventDefault();savedFilter=[];href=$(this).attr("href");$(".prosjekt-list li").each(function(){if($(this).css("opacity")!=0){savedFilter.push($(this).attr("data-id"))}});$("input#filter").val(savedFilter.join(","));$("form#savefilters").ajaxSubmit({success:function(e){window.location=href},error:function(e){},dataType:"json"})});if($("input#prosjektfilter").val()=="yes"){setTimeout(function(){var e=$(".prosjekt-list ul");e.isotope({itemSelector:"li.whitebox",layoutMode:"straightDown",straightDown:{rowHeight:342},masonry:{gutterWidth:36}});setTimeout(function(){e.addClass("animation");$(".prosjekt-list ul").addClass("animate")},1e3)},500);$(".tomt-filter a").on(clickevent,function(e){e.preventDefault();$filterContainer.isotope({filter:$(this).attr("data-id")});$(".tomt-filter").hide()})}$("#page-wrap.kontakt").on(clickevent,".input-wrap.dropdown",function(e){e.stopPropagation();var t=$(this).find(".select-content");t.slideToggle(200)});$("#page-wrap.kontakt").on(clickevent,".input-wrap.dropdown li",function(e){var t=$(this).closest(".custom-select-wrap").find("input");t.val($(this).text())});$(".kontakt-wrap").on(clickevent,".input-wrap.dropdown li",function(e){e.stopPropagation();alert("clcik")});$(".js-newsFilterDropdown").on(clickevent,function(e){e.preventDefault();e.stopPropagation();$(".popup.office-filter").toggle()});$(".js-tomtFilter").on(clickevent,function(e){e.preventDefault();e.stopPropagation();$(".popup.tomt-filter").toggle()});$(".popup").on(clickevent,function(e){e.stopPropagation()});$("body").on(clickevent,function(){$(".popup").hide();$("#top_search_results").hide()});var n=false;$("form#contactform").submit(function(e){el=$(this);e.preventDefault();if(n)return;n=true;el.ajaxSubmit({success:function(e){n=false;if(e.status=="validation"){el.before('<div class="alert alert-error">'+e.message+'<i class="ss-delete"></i></div>')}if(e.status=="success"){fn=r(e.message,true);fn=null}},error:function(e){n=false;el.before('<div class="alert alert-error">Meldingen kunne ikke sendes</div>')},dataType:"json"})});$("body").on(clickevent,"i.ss-delete",function(){$(this).closest(".alert").remove()});$("a.js-loadMoreNews").on(clickevent,function(e){e.preventDefault();el=$(this);offset=el.attr("data-offset");$.getJSON(t+"front/nyhet/load_more_ajax/"+offset).done(function(e){$.each(e.items,function(){$(".news-list ul").append("<li>"+'<a href="'+t+"bli-kjent/siste-nytt/"+this.id+'">'+'<img src="'+t+"uploads/articles/"+this.id+"/"+this.thumb+'" />'+'<h4 class="title">'+this.tittel+"</h4>"+"<hr />"+'<p class="exerpt">'+this.ingress+"</p>"+'<div class="readmore btn3><h6>Les mer</h6></div></a></li>')});if(!e.more)el.hide()});el.attr("data-offset",parseInt(offset)+6);offset=null});$("body").on(clickevent,".js-closePopup",function(){$.magnificPopup.close()});$(".js-smallFooterCatalog").on(clickevent,function(e){e.preventDefault();e.stopPropagation();var t=$(this),n=t.find(".catalog-popup");n.toggle()});$(".js-catalogFooterForm").on(clickevent,function(e){e.stopPropagation();e.preventDefault();var t=$(this),n=t.find(".button-wrap"),r=t.find(".form-wrap");if($(this).hasClass("active")){}else{t.addClass("active");t.css("overflow","visible");r.slideDown(200)}});$("form#hytteform").on("click","submit",function(e){e.preventDefault();alert("click")});$(".js-smallFooterCatalog .submitbtn").on(clickevent,function(e){e.stopPropagation();e.preventDefault();var t=$(this).closest("form");t.find(".validation-errors").remove();t.ajaxSubmit({success:function(e){if(e.status=="success"){t.find("input").each(function(){$(this).val("")});r("Takk for hendvendelsen! Vi sender deg en katalog")}if(e.status=="validation"){t.find(".submitbtn").before('<div class="validation-errors">'+e.message+"</div>")}},error:function(e){},dataType:"json"})});$(".js-catalogFooterForm, .catalog-popup-module").on(clickevent,".submitbtn",function(){var e=$(this).closest("form"),t=false;e.find(".req").remove();e.find("input").each(function(){if($(this).attr("id")=="postcode"){if(isNaN($(this).val())||$(this).val().length!=4){$(this).parent().append('<span class="req">*</span>');t=true}}else{if($(this).val().replace(" ","")==""||!$(this).val()){$(this).parent().append('<span class="req">*</span>');t=true}}if($(this).val().replace(" ","")==""||!$(this).val()){$(this).parent().append('<span class="req">*</span>');t=true}});if(t)return;e.ajaxSubmit({success:function(t){if(t.status=="success"){e.find("input").each(function(){$(this).val("")});if(e.attr("id")=="hytteform"){$.magnificPopup.close();setTimeout(function(){r("Takk for hendvendelsen! Vi sender deg en katalog.");return},20)}e.closest(".js-catalogFooterForm").css("overflow","hidden");e.closest(".js-catalogFooterForm").find(".form-wrap").hide();e.closest(".js-catalogFooterForm").removeClass("active");r("Takk for hendvendelsen! Vi sender deg en katalog.")}},error:function(e){},dataType:"json"})});$("body").on(clickevent,function(){if($("input#top_search").blur());if($("header").hasClass("expanded")){$("header").removeClass("expanded")}});$("header").on(clickevent,function(e){if(!$(this).hasClass("expanded")){$(this).addClass("expanded");$("#top_search_results").hide()}e.stopPropagation()});$(".top_search").on(clickevent,function(e){e.stopPropagation()});$("a.brand").on(clickevent,function(e){e.stopPropagation()});(function(e){e.fn.equalHeights=function(t,n,r,i,s){tallest=t?t:0;this.each(function(){if(r){if(e(this).parent().height()>tallest){tallest=e(this).parent().height()}}else{if(e(this).height()>tallest){tallest=e(this).height()}}});if(s)tallest=tallest+s;if(n&&tallest>n)tallest=n;return this.each(function(){if(i){e(this).animate({height:tallest},2)}else{e(this).height(tallest).css("overflow","hidden")}})}})(jQuery);(function(e){e.fn.equalHeightsPad=function(){tallest=0;this.each(function(){if(e(this).height()>tallest){tallest=e(this).height()}});return this.each(function(){if(e(this).height()<tallest){padding=tallest-e(this).height();e(this).css("padding-top",padding)}})}})(jQuery);$(".big-footer .top-buttons .col").equalHeights();$(".big-footer .col .text.equal").equalHeights();imagesLoaded(document.querySelector("#page-wrap"),function(e){$(".news-list li a").equalHeights(false,false,true,true);$(".news-slide ul li a").equalHeights(false,"470",true,true,20)});$(".nyhet .top .equalh").equalHeightsPad();$(".ansatte-bilde .point").hover(function(){var e=$(this).attr("data-id");$("ul.ansatte li").each(function(){if($(this).attr("data-id")!=e){$(this).css("opacity","0.7")}else{$(this).css("opacity","1")}})},function(){$("ul.ansatte li").each(function(){$(this).removeAttr("style")})});$("ul.ansatte li").hover(function(){var e=$(this).attr("data-id");$(".ansatte-bilde").addClass("hoverActive");$(".ansatte-bilde").find("[data-id="+e+"]").addClass("hover")},function(){$(".ansatte-bilde").removeClass("hoverActive");var e=$(this).attr("data-id");$(".ansatte-bilde").find("[data-id="+e+"]").removeClass("hover")});$("ul.ansatte li").on(clickevent,function(){$("ul.ansatte").removeClass("active");$("ul.ansatte li").each(function(){if($(this).hasClass("active")){$(this).removeClass("active")}});$(this).addClass("active");var e=$(this).attr("data-id");$(".ansatte-bilde .point").each(function(){if($(this).hasClass("active")){$(this).removeClass("active")}});$(".ansatte-bilde").find(".point[data-id="+e+"]").addClass("active")});$(".ansatte-bilde .point").on(clickevent,function(){$("ul.ansatte").removeClass("active");$(".ansatte-bilde .point").each(function(){if($(this).hasClass("active")){$(this).removeClass("active")}});$(this).addClass("active");var e=$(this).attr("data-id");$("ul.ansatte li").each(function(){if($(this).hasClass("active")){$(this).removeClass("active")}});$("ul.ansatte").find("[data-id="+e+"]").addClass("active")});$("ul.dropdown > li table").on(clickevent,function(e){e.stopPropagation()});$("ul.dropdown > li").on(clickevent,function(e){e.preventDefault();if($(this).parent().hasClass("table")){element=".expandable";s($(this))}else{element="ul"}if($(this).hasClass("active")){$(this).removeClass("active");$(this).find(element).slideUp();$("ul.dropdown li.inactive").removeClass("inactive")}else{$("ul.dropdown > li").each(function(e){$(this).removeClass("active");$(this).addClass("inactive");$(this).find(element).slideUp()});$(this).addClass("active");$(this).removeClass("inactive");$(this).find(element).slideDown()}});$(".big-search i.ss-delete").on(clickevent,function(){$(this).siblings("input").val("");$(this).siblings("input").trigger("keyup");$(this).hide()});$("ul.big-list.dropdown ul > li").on(clickevent,function(e){e.stopPropagation()});$("ul.dealers li > a").on("click",function(e){e.preventDefault();$(this).closest("li").toggleClass("active");$(this).closest("li").find(".expandable").slideToggle()});$(".js-officeSearch").keyup(function(e){$("");el=$(this);list=$("ul.kontorer");query=el.val().toLowerCase();if(query.length>2){el.siblings("i.ss-delete").show();list.find("li").each(function(){li=$(this);name=li.find(".left h1").text().toLowerCase();if(name.indexOf(query)<0){$(this).hide()}})}else{list.find("li").each(function(){$(this).show()})}if(query.length==0){el.siblings("i.ss-delete").hide()}});$(".js-presseSearch").keyup(function(e){el=$(this);list=$("ul.big-list");query=el.val().toLowerCase();if(el.val().length>2){el.siblings("i.ss-delete").show();list.find("li").each(function(){if(!$(this).hasClass("hasresult")){$(this).find("ul").slideUp()}});list.find("li").each(function(){li=$(this);i=0;li.find("li").each(function(){subli=$(this);title=subli.find(".title").text().toLowerCase();if(title.indexOf(query)>=0){i++;subli.addClass("active");subli.show()}else{subli.removeClass("active");subli.hide()}});if(i>0){li.find("ul").slideDown();li.addClass("hasresult")}else{li.removeClass("hasresult");li.addClass("inactive")}li.find(".right h1").text(i+" filer");li=null})}if(el.val().length==0){el.siblings("i.ss-delete").hide()}});$(".js-presseSearch").keyup(function(e){if($(this).val().length<3){$("ul.big-list li").each(function(){$(this).find(".right h1").text($(this).attr("data-count")+" filer");$(this).find("ul").slideUp();$(this).find("li").removeClass("active");$(this).find("li").show();$(this).removeClass("hasresult");$(this).removeClass("inactive")})}});$("#page-wrap.ansatte tr").on(clickevent,function(){window.location=$(this).attr("href")});$("#page-wrap.ansatte tr").on(clickevent,"td.email",function(e){e.stopPropagation()});$(".js-employeeSearch").keyup(function(e){el=$(this);query=el.val().toLowerCase();if(el.val().length>2){el.siblings("i.ss-delete").show();$("ul.table li").each(function(){if(!$(this).hasClass("hasresult")){$(this).find(".expandable").slideUp()}});$("ul.table li").each(function(){li=$(this);i=0;li.find("tr").each(function(){tr=$(this);name=tr.find("td.navn h6").text().toLowerCase();if(name.indexOf(query)>=0){i++;tr.addClass("active");tr.show()}else{tr.removeClass("active");tr.hide()}});if(i>0){li.find(".employee-image").hide();li.find(".expandable").slideDown();li.addClass("hasresult");li.addClass("active")}else{li.removeClass("hasresult");li.addClass("inactive");li.removeClass("active")}if(i==1){li.find(".right h1").text(i+" ansatt")}else{li.find(".right h1").text(i+" ansatte")}li=null})}});$("#page-wrap.ansatte .big-list.dropdown").on(clickevent,"li",function(){s($(this))});$(".js-employeeSearch").keyup(function(e){if($(this).val().length<3){$("ul.table li").each(function(){var e=$(this).attr("data-count");if(e==1){$(this).find(".right h1").text(e+" ansatt")}else{$(this).find(".right h1").text(e+" ansatte")}$(this).find(".expandable").slideUp();$(this).find("tr.active").removeClass("active");$(this).find("tr").show();$(this).removeClass("active");$(this).removeClass("hasresult");$(this).removeClass("inactive")})}if($(this).val().length==0){$(this).siblings("i.ss-delete").hide()}});$(".module-x a.readmore").on(clickevent,function(e){e.preventDefault();el=$(this);module=el.closest(".module").find(".module-x-1");if(module.hasClass("active")){module.slideUp();module.removeClass("active");el.find("h6").text(el.attr("data-text"))}else{module.slideDown();module.addClass("active");el.find("h6").text("Lukk")}});var o=$(".goto").height();var u="-"+o/2;$(".goto").css("marginTop",u+"px");$(".js-callMeForm").on(clickevent,function(e){e.stopPropagation();e.preventDefault();var t=$(this),n=t.find(".button-wrap"),r=t.find(".form-wrap");if($(this).hasClass("active")){}else{t.addClass("active");t.css("overflow","visible");r.slideDown(200)}});$(".js-callMeForm").on(clickevent,".submitbtn",function(){var e=$(this).closest("form"),t=false;e.find(".req").remove();e.find("input").each(function(){if($(this).attr("id")!="email"){if($(this).val().replace(" ","")==""||!$(this).val()){$(this).parent().append('<span class="req">*</span>');t=true}if($(this).val().replace(" ","")==""||!$(this).val()){$(this).parent().append('<span class="req">*</span>');t=true}}});if(t)return;e.ajaxSubmit({success:function(t){if(t.status=="success"){e.find("input").each(function(){$(this).val("")});e.closest(".js-callMeForm").css("overflow","hidden");e.closest(".js-callMeForm").find(".form-wrap").hide();e.closest(".js-callMeForm").removeClass("active");r("Takk for hendvendelsen! Du hører fra oss.")}},error:function(e){},dataType:"json"})});$(".js-callMeForm").on(clickevent,"input#office",function(){$(this).closest(".input-wrap").find(".officepickpopup").toggle()});$(".js-callMeForm").on(clickevent,".officepickpopup li",function(){$(this).closest(".officepickpopup").hide();$(this).closest(".input-wrap").find("input").val($(this).find("h6").text())})});$(document).ready(function(){function e(){window.location=newLocation}$("#page-wrap").animate({opacity:1});$("footer").animate({opacity:1});window.onpageshow=function(e){if(e.persisted){setTimeout(function(){$("#page-wrap").css({opacity:1});$("footer").css({opacity:1})},50)}};$("a.fadeout, .goto_buttons a").on(clickevent,function(t){t.preventDefault();if($(this).attr("href")=="#")return false;newLocation=this.href;$("#page-wrap, footer").animate({opacity:0},e())});$(".js-jumpto").on(clickevent,function(){target=$("body").find("."+$(this).attr("data-target"));$("html, body").animate({scrollTop:target.offset().top-100})});$(".js-gotoSections a").on(clickevent,function(e){e.preventDefault();$el=$(this);$target=$($el.attr("href"));$("html, body").animate({scrollTop:$target.offset().top-80},300)})});var Slider=function(){this.initialize.apply(this,arguments)};Slider.prototype={initialize:function(e){this.ul=e.children[0];this.li=this.ul.children;this.ul.style.width=this.li[0].clientWidth*this.li.length+"px";$(e).append('<a class="slider-nav slider-prev" href="javascript:sliders[0].goToPrev()"></a><a class="slider-nav slider-next" href="javascript:sliders[0].goToNext()"></a>');this.currentIndex=0},goTo:function(e){if(e<0||e>this.li.length-1)return;this.ul.style.left="-"+100*e+"%";this.currentIndex=e},goToPrev:function(){this.goTo(this.currentIndex-1)},goToNext:function(){this.goTo(this.currentIndex+1)}}